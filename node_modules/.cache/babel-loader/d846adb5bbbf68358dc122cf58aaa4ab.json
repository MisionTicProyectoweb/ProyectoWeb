{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ITO\\\\Documents\\\\PROYECTOS\\\\MISIONTIC\\\\ProyectoWeb\\\\src\\\\layouts\\\\LayoutPrivado.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport Sidebar from 'components/SideBar.jsx';\nimport SidebarResponsive from 'components/SidebarResponsive';\nimport { useEffect } from 'react';\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport loafing from \"media/loadingfin.png\";\nimport { obtenerdatosUsuario } from 'utils/api';\nimport { useUser } from 'Contex/UserContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst LayoutPrivado = ({\n  children\n}) => {\n  _s();\n\n  const {\n    isAuthenticated,\n    isLoading,\n    getAccessTokenSilently,\n    logout\n  } = useAuth0();\n  const {\n    setUserData\n  } = useUser();\n  const [loadingUserInfromation, setloadingUserInfromation] = useState(false);\n  useEffect(() => {\n    const FetchAuth0Token = async () => {\n      //si se quiere hacer validaciones cn el token \n\n      /*   if(localStorage.getItem('token')){\r\n          //validar fecha de aspiracion del token\r\n        }\r\n      else{ */\n      // 1.PEDIR TOKEN A AUTH0\n      setloadingUserInfromation(true);\n      const accessToken = await getAccessTokenSilently({\n        audience: 'api-autenticacion-almacen-mintic'\n      }); //2.RESIVIR TOKEN DE AUTH0\n\n      console.log(accessToken);\n      localStorage.setItem('token', accessToken); //obtener usuarios con peticion de error o bien\n      //3. ENVIARLE EL TOKEN AL BACKEN \n\n      await obtenerdatosUsuario(response => {\n        console.log('response', response);\n        setUserData(response.data);\n        setloadingUserInfromation(false); // console.log(\"ressss\",setUserData(response.data));\n      }, error => {\n        console.log('error', error);\n        setloadingUserInfromation(false);\n        logout({\n          returnTo: 'http://localhost:3000'\n        });\n      });\n    };\n\n    if (isAuthenticated) {\n      FetchAuth0Token();\n    }\n  }, [isAuthenticated, getAccessTokenSilently]);\n  console.log(isLoading || loadingUserInfromation);\n  if (isLoading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-10 flex justify-center text-green-300\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: loafing\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 71\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-10 flex justify-center text-indigo-600 text-4xl\",\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n  return (\n    /*#__PURE__*/\n    //<PrivateRoute>\n    _jsxDEV(\"div\", {\n      className: \"flex flex-col lg:flex-row flex-nowrap h-screen w-screnn\",\n      children: [/*#__PURE__*/_jsxDEV(Sidebar, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(SidebarResponsive, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"flex w-full bg-gray-100 \",\n        children: children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }, this) //</PrivateRoute>);\n\n  );\n};\n\n_s(LayoutPrivado, \"poqgZXlKwrGpSHldEKsJoXvHTE8=\", false, function () {\n  return [useAuth0, useUser];\n});\n\n_c = LayoutPrivado;\nexport default LayoutPrivado;\n\nvar _c;\n\n$RefreshReg$(_c, \"LayoutPrivado\");","map":{"version":3,"sources":["C:/Users/ITO/Documents/PROYECTOS/MISIONTIC/ProyectoWeb/src/layouts/LayoutPrivado.jsx"],"names":["React","useState","Sidebar","SidebarResponsive","useEffect","useAuth0","loafing","obtenerdatosUsuario","useUser","LayoutPrivado","children","isAuthenticated","isLoading","getAccessTokenSilently","logout","setUserData","loadingUserInfromation","setloadingUserInfromation","FetchAuth0Token","accessToken","audience","console","log","localStorage","setItem","response","data","error","returnTo"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,OAAP,MAAoB,wBAApB;AACA,OAAOC,iBAAP,MAA8B,8BAA9B;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,SAASC,QAAT,QAAyB,oBAAzB;AACA,OAAOC,OAAP,MAAoB,sBAApB;AACA,SAAQC,mBAAR,QAAkC,WAAlC;AACA,SAAQC,OAAR,QAAsB,oBAAtB;;;AAEA,MAAMC,aAAa,GAAG,CAAC;AAACC,EAAAA;AAAD,CAAD,KAAgB;AAAA;;AAClC,QAAM;AAACC,IAAAA,eAAD;AAAkBC,IAAAA,SAAlB;AAA4BC,IAAAA,sBAA5B;AAAmDC,IAAAA;AAAnD,MAA+DT,QAAQ,EAA7E;AACA,QAAM;AAACU,IAAAA;AAAD,MAAcP,OAAO,EAA3B;AACA,QAAM,CAACQ,sBAAD,EAAwBC,yBAAxB,IAAoDhB,QAAQ,CAAC,KAAD,CAAlE;AACAG,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMc,eAAe,GAAE,YAAU;AACrC;;AACI;AACN;AACA;AACA;AACI;AACAD,MAAAA,yBAAyB,CAAC,IAAD,CAAzB;AACI,YAAME,WAAW,GAAG,MAAMN,sBAAsB,CAAC;AAChDO,QAAAA,QAAQ,EAAC;AADuC,OAAD,CAAhD,CAR+B,CAY/B;;AACEC,MAAAA,OAAO,CAACC,GAAR,CAAYH,WAAZ;AACAI,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA6BL,WAA7B,EAd6B,CAgB7B;AACG;;AACP,YAAMZ,mBAAmB,CACtBkB,QAAD,IAAY;AACRJ,QAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAuBG,QAAvB;AACAV,QAAAA,WAAW,CAACU,QAAQ,CAACC,IAAV,CAAX;AACAT,QAAAA,yBAAyB,CAAC,KAAD,CAAzB,CAHQ,CAIb;AACI,OANoB,EAMlBU,KAAD,IAAS;AACTN,QAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAoBK,KAApB;AACAV,QAAAA,yBAAyB,CAAC,KAAD,CAAzB;AACAH,QAAAA,MAAM,CAAC;AAACc,UAAAA,QAAQ,EAAC;AAAV,SAAD,CAAN;AACD,OAVoB,CAAzB;AAYC,KA9BD;;AA+BA,QAAGjB,eAAH,EAAmB;AAEjBO,MAAAA,eAAe;AAChB;AAEA,GArCM,EAsCT,CAACP,eAAD,EAAkBE,sBAAlB,CAtCS,CAAT;AAuCFQ,EAAAA,OAAO,CAACC,GAAR,CAAYV,SAAS,IAAII,sBAAzB;AACE,MAAGJ,SAAH,EAAc,oBACV;AAAK,IAAA,SAAS,EAAC,EAAf;AAAA,4BACI;AAAM,MAAA,SAAS,EAAC,yCAAhB;AAAA,8BAA0D;AAAK,QAAA,GAAG,EAAEN;AAAV;AAAA;AAAA;AAAA;AAAA,cAA1D;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,eAEI;AAAK,MAAA,SAAS,EAAC,mDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADU;AASd;AAAA;AACI;AACA;AAAK,MAAA,SAAS,EAAC,yDAAf;AAAA,8BACI,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI,QAAC,iBAAD;AAAA;AAAA;AAAA;AAAA,cAFJ,eAGI;AAAM,QAAA,SAAS,EAAC,0BAAhB;AAAA,kBAA4CI;AAA5C;AAAA;AAAA;AAAA;AAAA,cAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAFJ,CAQD;;AARC;AASE,CA9DN;;GAAMD,a;UACmEJ,Q,EACjDG,O;;;KAFlBC,a;AAgEN,eAAeA,aAAf","sourcesContent":["import React, { useState } from 'react'\r\nimport Sidebar from 'components/SideBar.jsx'\r\nimport SidebarResponsive from 'components/SidebarResponsive';\r\nimport { useEffect } from 'react';\r\nimport { useAuth0 } from \"@auth0/auth0-react\";\r\nimport loafing from \"media/loadingfin.png\"\r\nimport {obtenerdatosUsuario} from 'utils/api';\r\nimport {useUser} from 'Contex/UserContext';\r\n\r\nconst LayoutPrivado = ({children}) => {\r\n    const {isAuthenticated, isLoading,getAccessTokenSilently,logout  } = useAuth0();\r\n    const {setUserData}=useUser();\r\n    const [loadingUserInfromation,setloadingUserInfromation]= useState(false);\r\n    useEffect(() => {\r\n      const FetchAuth0Token= async ()=>{\r\n  //si se quiere hacer validaciones cn el token \r\n      /*   if(localStorage.getItem('token')){\r\n          //validar fecha de aspiracion del token\r\n        }\r\n  else{ */\r\n    // 1.PEDIR TOKEN A AUTH0\r\n    setloadingUserInfromation(true);\r\n        const accessToken = await getAccessTokenSilently({\r\n         audience:'api-autenticacion-almacen-mintic',\r\n        \r\n        });\r\n        //2.RESIVIR TOKEN DE AUTH0\r\n          console.log(accessToken);\r\n          localStorage.setItem('token',accessToken);\r\n     \r\n          //obtener usuarios con peticion de error o bien\r\n             //3. ENVIARLE EL TOKEN AL BACKEN \r\n      await obtenerdatosUsuario(\r\n        (response)=>{\r\n            console.log('response',response);\r\n            setUserData(response.data);\r\n            setloadingUserInfromation(false);\r\n       // console.log(\"ressss\",setUserData(response.data));\r\n          },(error)=>{\r\n            console.log('error',error);\r\n            setloadingUserInfromation(false);\r\n            logout({returnTo:'http://localhost:3000'});\r\n          }\r\n        );\r\n      };\r\n      if(isAuthenticated){\r\n  \r\n        FetchAuth0Token();\r\n      }\r\n  \r\n      }\r\n  , [isAuthenticated, getAccessTokenSilently]); \r\n  console.log(isLoading || loadingUserInfromation);\r\n    if(isLoading) return(\r\n        <div className=\"\">\r\n            <div  className=\"p-10 flex justify-center text-green-300\"><img src={loafing}  /> </div>\r\n            <div className=\"p-10 flex justify-center text-indigo-600 text-4xl\">\r\n            Loading...  \r\n            </div>   \r\n      </div>\r\n    )\r\n  \r\n    return (\r\n        //<PrivateRoute>\r\n        <div className='flex flex-col lg:flex-row flex-nowrap h-screen w-screnn'>\r\n            <Sidebar/>\r\n            <SidebarResponsive />\r\n            <main className=\"flex w-full bg-gray-100 \">{children}</main>\r\n        </div>\r\n    \r\n   //</PrivateRoute>);\r\n    )}\r\n\r\nexport default LayoutPrivado"]},"metadata":{},"sourceType":"module"}